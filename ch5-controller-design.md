#### 1.从PID控制器谈起

PID控制器分不同的套路，一种是经验口诀整定，一种是经验公式整定，总之各有各的套路。

我们就从最简单的电动车聊起，30V的锂电池，加到电机上，转速3000rpm，把轮子加上空转，转速降到2500rpm，把车放到地上跑，转速又降到1000rpm，折算成车速就是10km/h，这速度太慢了，比走路快点，得想办法调快点，于是把锂电池多串上几条，电压加到100V，到了30km/h，这速度还行。现在是100V电压，30km/h，平路行驶，妥妥地老司机开车，啥事没有。

这时候有一个问题，就是电池一串好，就不能改工作电压了，只能听天由命跑完全程，这哪里是老司机嘛？？？？明明就是一根筋的二愣子。于是搞电力电子的兄弟们发明了一种简单方法，比如现在电池只有100V电压，那可以这样玩，加个电子开关，给电机通电5ms100V，再断开5ms，然后依次循环，只要频率足够快就没啥事，这样等效下来是不是就相当于50V电压呀，然后通过调节开通关断时间比例，来连续调节电压，这就叫做PWM控制。简单点说，**有了PWM调节，我们的电动车就可以调压调速了**。

老司机想着，总调节PWM（踩油门）真累，老子设定好一个70V电压，20km/h兜风模式，就让他自己跑吧，然后就狗血了

* 路上接了一个大帅哥和一个大美女，他们一上车，车速慢了，咋整呀？？？
* 随着车辆行驶电池耗电，电压不断在下降，车速也不断在变慢，咋整呀？？
* 进了山区，路况不好，上坡时，速度贼慢，下坡时，速度又贼快，咋整呀？？？

老司机心想：帅哥美女上来，负载增加了，车速降了，得加点电压；电池消耗电压下降，导致车速慢了，也得加点电压；上坡负载变大，车速下降，得加点电压，下坡负载变小，车速增快，得降点电压。老司机心想，这么多意外情况都要调PWM电压，那不把脑细胞烧死呀，得想想办法。思来想去，发现既然要控制车速20km/h，降了加电压，升了减电压，那直接用设定车速与实际车速的偏差值，去控制电压不就得了，差的多就多加点电压，差的少就少加点电压，这就是**比例控制器，用当前的速度偏差作为控制量，加到电机上，同样的速度偏差量，多加点还是少加点电压，就是比例系数，加少了，响应慢，加多了，车会震起来的，哈哈。**

这里要注意，单纯的比例控制，需要用速度偏差比例放大得到控制电压，这就意味着，要想有控制电压70V，那就必须一定要有速度偏差，这就意味着，不管你怎么调节比例系数，永远都达不到设定的20km/h，不过调大比例系数，这个偏差会变小。**比例控制里这个没办法消去的速度偏差，在控制系统里称为静差**。

老司机在想，该怎么消除这个静差呢？？？话说，直男眼里容不得一粒沙子呀

既然这个偏差一直存在，当前偏差已经用于比例控制，那是不是可以累积偏差，作为控制量，用历史的偏差信息去控制。

我们通过的这些情况，我们在做任何系统设计的时候，都会遇到类似的意外情况。不管是外界的负载变化，还是内部的电源变化，都需要我们去平衡，而这种情况下，

从直流电机转速控制开始聊起，一切条件均理想，当我们给空载的直流电机两端加30V电压的时候，我们测得直流电机3000 rpm（3000转每分钟），现在让这个电机带动一辆车空转，转速降到了2500rpm，把车放到地上跑，转速又降到1000rpm，人背东西走的也慢，电机也一个鸟样。为了达到理想行驶效果，需要转速稳定运行在1500rpm（30km/h），通过手动试凑调节电压，最后确定45V可以稳定在1500rpm，然后我们就觉得一切OK了，可以去喝茶了，让电机自己在那搅拌吧。

随着饲料搅拌的均匀，负载变低，转速升上去了，要赶快降电压。冬天，温度低，饲料刚开始变稠了，转速又降了。还有各种意外情况，每出现

#### 2.转速PI控制器

#### 3.转向PD控制器



